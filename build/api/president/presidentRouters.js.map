{"version":3,"sources":["../../../server/api/president/presidentRouters.js"],"names":["presidentRouter","param","req","res","next","president","presidentFullName","split","length","find","abbreviation","baseUrl","presidents","$elemMatch","firstName","toString","lastName","err","data","presidentObject","locals","send","get","json"],"mappings":";;;;;;AAAA;;AACA;;AAEA,IAAMA,kBAAkB,sBAAxB;;AAEA;AACA;AACAA,gBAAgBC,KAAhB,CAAsB,WAAtB,EAAmC,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAiBC,SAAjB,EAA+B;;AAE9D,QAAMC,oBAAoBD,UAAUE,KAAV,CAAgB,GAAhB,CAA1B;AACA,QAAID,kBAAkBE,MAAlB,KAA6B,CAAjC,EAAoC;AAChC,yBAAaC,IAAb,CAAkB,EAACC,cAAcR,IAAIS,OAAJ,CAAYJ,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAf,EAAlB,EAA6D;AACzDK,wBAAY;AACRC,4BAAY;AACRC,+BAAWR,kBAAkB,CAAlB,EAAqBS,QAArB,EADH;AAERC,8BAAUV,kBAAkB,CAAlB,EAAqBS,QAArB;AAFF;AADJ;AAD6C,SAA7D,EAOG,UAACE,GAAD,EAAMC,IAAN,EAAe;AACd,gBAAMC,kBAAkBD,KAAK,CAAL,EAAQN,UAAR,CAAmB,CAAnB,CAAxB;AACAT,gBAAIiB,MAAJ,CAAWf,SAAX,GAAwBa,KAAK,CAAL,EAAQN,UAAR,CAAmBJ,MAAnB,KAA8B,CAA/B,GAAoCW,eAApC,GAAsD,qBAA7E;AACAf;AACH,SAXD;AAYH,KAbD,MAaO;AACHD,YAAIkB,IAAJ,CAAS,qBAAT;AACH;AACJ,CAnBD;;AAqBA;AACArB,gBAAgBsB,GAAhB,CAAoB,aAApB,EAAmC,UAACpB,GAAD,EAAMC,GAAN,EAAc;AAC7CA,QAAIoB,IAAJ,CAASpB,IAAIiB,MAAJ,CAAWf,SAApB;AACH,CAFD;;kBAIeL,e","file":"presidentRouters.js","sourcesContent":["import {Router} from 'express';\r\nimport {CountryModel} from \"../../db/db\";\r\n\r\nconst presidentRouter = Router();\r\n\r\n//Inside root/countries/:country/:president\r\n//Parameters handler\r\npresidentRouter.param(\"president\", (req, res, next, president) => {\r\n\r\n    const presidentFullName = president.split(\"-\");\r\n    if (presidentFullName.length === 2) {\r\n        CountryModel.find({abbreviation: req.baseUrl.split('/')[3]}, {\r\n            presidents: {\r\n                $elemMatch: {\r\n                    firstName: presidentFullName[0].toString(),\r\n                    lastName: presidentFullName[1].toString()\r\n                }\r\n            }\r\n        }, (err, data) => {\r\n            const presidentObject = data[0].presidents[0];\r\n            res.locals.president = (data[0].presidents.length !== 0) ? presidentObject : \"No President Found!\";\r\n            next();\r\n        });\r\n    } else {\r\n        res.send(\"No President Found!\");\r\n    }\r\n});\r\n\r\n//Route handler\r\npresidentRouter.get(\"/:president\", (req, res) => {\r\n    res.json(res.locals.president);\r\n});\r\n\r\nexport default presidentRouter;"]}